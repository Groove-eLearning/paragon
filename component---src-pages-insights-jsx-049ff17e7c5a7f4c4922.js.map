{"version":3,"sources":["webpack://paragon-pattern-library-documentation/./src/pages/insights.jsx"],"names":["analysisLastUpdated","dependentProjectsAnalysis","dependentProjectsUsages","dependentProjects","map","dependentUsage","count","Object","values","usages","reduce","accumulator","usage","length","componentsUsage","project","keys","forEach","componentName","concat","name","folderName","version","componentUsageCount","summaryComponentsUsage","entries","SummaryUsage","n","summaryTableData","sort","a","b","nameA","toUpperCase","nameB","averageComponentsUsedPerProject","className","Math","round","DataTable","isSortable","itemCount","data","columns","Header","accessor","content","ProjectsUsage","ComponentUsage","componentUsageInProjects","ComponentsUsage","key","InsightsPage","Container","size","SEO","title","Date","toLocaleDateString","Tabs","defaultActiveKey","id","Tab","eventKey"],"mappings":"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","file":"component---src-pages-insights-jsx-049ff17e7c5a7f4c4922.js","sourcesContent":["import React from 'react';\nimport {\n  DataTable, Tabs, Tab, Container,\n} from '~paragon-react'; // eslint-disable-line\nimport SEO from '../components/SEO';\nimport Layout from '../components/PageLayout';\nimport dependentProjectsAnalysis from '../../../dependent-usage.json';\n\nconst {\n  lastModified: analysisLastUpdated,\n  projectUsages: dependentProjectsUsages,\n} = dependentProjectsAnalysis;\n\nconst dependentProjects = dependentProjectsUsages.map(dependentUsage => ({\n  ...dependentUsage,\n  count: Object.values(dependentUsage.usages).reduce((accumulator, usage) => accumulator += usage.length, 0),\n}));\n\nconst componentsUsage = dependentProjectsUsages.reduce((accumulator, project) => {\n  Object.keys(project.usages).forEach(componentName => {\n    if (!accumulator[componentName]) {\n      accumulator[componentName] = [];\n    }\n    accumulator[componentName] = accumulator[componentName].concat({\n      name: project.name,\n      folderName: project.folderName,\n      version: project.version,\n      componentUsageCount: project.usages[componentName].length,\n    });\n  });\n  return accumulator;\n}, {});\n\nconst summaryComponentsUsage = Object.entries(componentsUsage).map(([componentName, usages]) => {\n  const componentUsageCounts = usages.reduce((accumulator, project) => accumulator += project.componentUsageCount, 0);\n  return {\n    name: componentName,\n    count: componentUsageCounts,\n  };\n});\n\nconst SummaryUsage = () => {\n  const summaryTableData = summaryComponentsUsage.sort((a, b) => {\n    const nameA = a.name.toUpperCase();\n    const nameB = b.name.toUpperCase();\n    return (nameA < nameB) ? -1 : (nameA > nameB) ? 1 : 0;\n  });\n  const round = (n) => Math.round(n * 10) / 10;\n  const averageComponentsUsedPerProject = dependentProjects.reduce((accumulator, project) => accumulator += project.count, 0) / dependentProjects.length;\n  return (\n    <div className=\"pt-5 mb-5\">\n      <div className=\"mb-5\">\n        <h3>Overview</h3>\n        <p>\n          Paragon is used by at least <strong>{dependentProjects.length} projects</strong>, with an average\n          of <strong>{round(averageComponentsUsedPerProject)} component instances</strong> per project.\n        </p>\n      </div>\n      <h3>Overall component usage</h3>\n      <DataTable\n        isSortable\n        itemCount={summaryTableData.length}\n        data={summaryTableData}\n        columns={[\n          { Header: 'Component Name', accessor: 'name' },\n          { Header: 'Instance Count', accessor: 'count' },\n        ]}\n      >\n        <DataTable.TableControlBar />\n        <DataTable.Table />\n        <DataTable.EmptyTable content=\"No summary available\" />\n        <DataTable.TableFooter />\n      </DataTable>\n    </div>\n  );\n};\n\n// Paragon version in all projects\nconst ProjectsUsage = () => (\n  <div className=\"pt-5 mb-5\">\n    <h3 className=\"mb-4\">Projects in Open edX consuming Paragon</h3>\n    <DataTable\n      isSortable\n      itemCount={dependentProjects.length}\n      data={dependentProjects}\n      columns={[\n        { Header: 'Project Name', accessor: 'folderName' },\n        { Header: 'Paragon Version', accessor: 'version' },\n        { Header: 'Instance Count', accessor: 'count' },\n      ]}\n    >\n      <DataTable.TableControlBar />\n      <DataTable.Table />\n      <DataTable.EmptyTable content=\"No projects\" />\n      <DataTable.TableFooter />\n    </DataTable>\n  </div>\n);\n\n// Usage info about a single component\n// eslint-disable-next-line\nconst ComponentUsage = ({ name, componentUsageInProjects }) => (\n  <div className=\"mb-5\">\n    <h3 className=\"mb-4\">{name}</h3>\n    <DataTable\n      isSortable\n      itemCount={componentUsageInProjects.length} // eslint-disable-line\n      data={componentUsageInProjects}\n      columns={[\n        { Header: 'Project Name', accessor: 'folderName' },\n        { Header: 'Paragon Version', accessor: 'version' },\n        { Header: 'Instance Count', accessor: 'componentUsageCount' },\n      ]}\n    >\n      <DataTable.Table />\n      <DataTable.EmptyTable content=\"No usages\" />\n    </DataTable>\n  </div>\n);\n\n// Usage info for all components\nconst ComponentsUsage = () => (\n  <div className=\"pt-5 mb-5\">\n    {Object.keys(componentsUsage).sort().map(name => (\n      <ComponentUsage\n        key={name}\n        name={name}\n        componentUsageInProjects={componentsUsage[name]}\n      />\n    ))}\n  </div>\n);\n\nexport default function InsightsPage() {\n  return (\n    <Layout>\n      <Container size=\"md\" className=\"py-5\">\n        <SEO title=\"Usage Insights\" />\n        <header className=\"mb-5\">\n          <h1>Usage Insights</h1>\n          <p>Last updated: {new Date(analysisLastUpdated).toLocaleDateString()}</p>\n        </header>\n        <Tabs defaultActiveKey=\"summary\" id=\"uncontrolled-tab-example\">\n          <Tab eventKey=\"summary\" title=\"Summary\">\n            <SummaryUsage />\n          </Tab>\n          <Tab eventKey=\"projects\" title=\"Projects\">\n            <ProjectsUsage />\n          </Tab>\n          <Tab eventKey=\"components\" title=\"Components\">\n            <ComponentsUsage />\n          </Tab>\n        </Tabs>\n      </Container>\n    </Layout>\n  );\n}\n"],"sourceRoot":""}